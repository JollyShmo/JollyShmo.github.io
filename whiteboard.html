<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Whiteboard</title>
<!-- Bootstrap CSS -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<style>
    body {
        margin: 0;
    }
    .container {
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 100vh;
    }
    #whiteboard-container {
    flex-grow: 1;
    width: 100%;
    overflow: hidden;
    touch-action: none; /* Disable browser default touch actions */
}

body {
    overflow: hidden; /* Disable scrolling for the entire page */
}
    #whiteboard {
        border: 1px solid #000;
        width: 100%;
        height: 100%;
    }
    .controls {
        width: 100%;
        padding: 10px;
        box-sizing: border-box;
        text-align: center;
    }
    .control-container {
        display: inline-block;
        margin-right: 10px;
    }
</style>
</head>
<body>
<div class="container">
    <div id="whiteboard-container">
        <canvas id="whiteboard"></canvas>
    </div>
    <div class="controls">
        <div class="control-container">
            <label for="color">Color:</label>
            <input type="color" id="color" value="#000000">
        </div>
        <div class="control-container">
            <label for="lineWidth">Line Width:</label>
            <input type="range" id="lineWidth" min="1" max="20" value="2">
        </div>
        <div class="control-container">
            <label for="lineCap">Line Cap:</label>
            <select id="lineCap" class="form-control">
                <option value="round">Round</option>
                <option value="square">Square</option>
                <option value="butt">Butt</option>
            </select>
        </div>
        <div class="control-container">
            <button id="eraser" class="btn btn-primary">Eraser</button>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const canvas = document.getElementById('whiteboard');
        const ctx = canvas.getContext('2d');
        const colorInput = document.getElementById('color');
        const lineWidthInput = document.getElementById('lineWidth');
        const lineCapSelect = document.getElementById('lineCap');
        const eraserButton = document.getElementById('eraser');
        let isDrawing = false;
        let isErasing = false;
        let lastX, lastY;

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight - document.querySelector('.controls').offsetHeight;

        function startDrawing(e) {
            e.preventDefault();
            if (isErasing) return;
            isDrawing = true;
            [lastX, lastY] = [e.clientX - canvas.offsetLeft, e.clientY - canvas.offsetTop];
        }

        function draw(e) {
            e.preventDefault();
            if (!isDrawing || isErasing) return;
            ctx.strokeStyle = colorInput.value;
            ctx.lineWidth = lineWidthInput.value;
            ctx.lineCap = lineCapSelect.value;
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            const [x, y] = [e.clientX - canvas.offsetLeft, e.clientY - canvas.offsetTop];
            ctx.lineTo(x, y);
            ctx.stroke();
            [lastX, lastY] = [x, y];
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function erase(e) {
            e.preventDefault();
            if (!isErasing) return;
            const touch = e.touches[0] || e.changedTouches[0];
            ctx.clearRect(touch.clientX - canvas.offsetLeft, touch.clientY - canvas.offsetTop, lineWidthInput.value, lineWidthInput.value);
        }

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);
        
        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', stopDrawing);
        canvas.addEventListener('touchcancel', stopDrawing);
        
        eraserButton.addEventListener('click', function () {
            isErasing = !isErasing;
            if (isErasing) {
                eraserButton.textContent = 'Drawing';
            } else {
                eraserButton.textContent = 'Eraser';
            }
        });

        // Add erase function to touchmove event listener when eraser mode is active
        eraserButton.addEventListener('click', function () {
            if (isErasing) {
                canvas.addEventListener('touchmove', erase);
            } else {
                canvas.removeEventListener('touchmove', erase);
            }
        });
    });
</script>
</body>
</html>
